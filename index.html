
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="description" content="$1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="style.css">
  <link rel="stylesheet" type="text/css" href="form.css">
  <link rel="icon" href="images\corridor-icon.png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.8.3/jquery.csv.min.js"></script>
  <script src="corimport.js" type="text/javascript"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jexcel/2.0.0/js/jquery.jexcel.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jexcel/2.0.0/css/jquery.jexcel.min.css" type="text/css" />


  <title>CorImport Web Tool</title>

</head>
<body>

  <div class="style">

    <form id="main-form" onsumbit="return formValidate()" action="dataset.html">
      <a id="help" href="https://support.corridor.aero/hc/en-us/restricted?return_to=https%3A%2F%2Fsupport.corridor.aero%2Fhc%2Fen-us">Help</a>
      <a href="https://www.corridor.aero/"><img src="images\CORRIDOR-CAMP-Systems-White-copy.png" alt="CORRIDOR"></a><br/>
      <div id="sub-div">
        <h1>Welcome to the CorImport Web Tool!</h1><br/>
      </div>
      <hr/>
      <label id="name">Data Set</label><br/>
      <select id="dataSetDropDown" onchange="dataSetNameSave()" required>
        <option value="">Select a data set...</option>
        <optgroup label="Accounting">
          <option value="Add Account Numbers">Add Account Numbers</option>
        </optgroup>
        <optgroup label="Aircraft">
          <option value="Add Aircraft">Add Aircraft</option>
        </optgroup>
        <optgroup label="Add/Update Canned Squawk">
          <option value="Canned Squawk Applicability">Canned Squawk Applicability</option>
          <option value="Canned Squawk Estimate Adjustment">Canned Squawk Estimate Adjustment</option>
          <option value="Canned Squawk Estimated Labor">Canned Squawk Estimated Labor</option>
          <option value="Canned Squawk Files">Canned Squawk Files</option>
          <option value="Canned Squawk Part">Canned Squawk Part</option>
          <option value="Canned Squawk Planning">Canned Squawk Planning</option>
          <option value="Canned Squawk">Canned Squawk</option>
        </optgroup>
        <optgroup label="Company Database">
          <option value="Add Company Addresses">Add Company Address</option>
          <option value="Add Company Phone">Add Company Phone</option>
          <option value="Add Company Profile">Add Company Profile</option>
        </optgroup>
        <optgroup label="Contact">
          <option value="Add Contact Address">Add Contact Address</option>
          <option value="Add Contact Phone">Add Contact Phone</option>
          <option value="Add Contact Profile">Add Contact Profile</option>
        </optgroup>
        <optgroup label="Add/Update Inventory">
          <option value="Part Masters">Part Masters</option>
          <option value="Add Inventory Lots">Add Inventory Lots</option>
          <option value="Part Discount Codes">Part Discount Codes</option>
          <option value="Part Pricing">Part Pricing</option>
          <option value="Warehouse Min & Max">Warehouse Min & Max</option>
        </optgroup>
        <optgroup label="Add/Update Tool Crib">
          <option value="Tool Master">Tool Master</option>
          <option value="Tool Master Calibration">Add/Update Tool Master Calibration</option>
          <option value="Tools">Tools</option>
        </optgroup>
        <optgroup label="Add/Update Work Paks">
          <option value="Work Pak Applicability">Work Pak Applicability</option>
          <option value="Work Pak Detail">Work Pak Detail</option>
          <option value="Work Pak Estimate Adjustment">Work Pak Estimate Adjustment</option>
          <option value="Work Pak Estimated Labor">Work Pak Estimated Labor</option>
          <option value="Work Pak Part">Work Pak Part</option>
          <option value="Work Pak Planning">Work Pak Planning</option>
          <option value="Work Pak">Work Pak</option>
        </optgroup>
      </select><br/>

      <input type="checkbox" id="open-doc-box">Open documentation for this data set<br/>

      <label id="name">Choose a file to format</label><br/>
      <input type="file" name="fileToUpload" id="fileToUpload" onchange="dataFileNameSave()" accept=".csv" required/>
      <div class="index-button-container">
        <button type="submit" id="btnGenerate" name="submit" onclick="Generate()">    Generate</button><br/>
        <!-- <input  type="submit" value="Generate" name="submit" onclick="Generate()"/><br/> -->
        <button type="button" id="btnErrorSearch"><i class="fas fa-exclamation-triangle"></i>    Have an Error?</button>
    </form>

    <div id="error-modal">
      <div id="error-modal-content">
        <span class="close"><i class="far fa-times-circle"></i></span>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi iaculis ligula ante, nec gravida dui dictum eu. Nulla blandit, quam id vehicula iaculis, diam augue molestie metus, faucibus venenatis orci ipsum sit amet leo. Praesent varius dui in ipsum ultricies, eu auctor lectus porttitor. Donec et placerat libero. Maecenas ultricies nunc sed nisi placerat, ac ultricies ante fermentum. Quisque eu ipsum sagittis, auctor tortor scelerisque, rhoncus sem. Quisque convallis suscipit ipsum. Praesent auctor rhoncus lorem in lacinia. Sed lorem nisi, dignissim a elit id, suscipit egestas lorem. Phasellus fermentum viverra sem, et varius velit tincidunt a. Vivamus sapien ante, convallis sit amet placerat laoreet, accumsan tempor arcu. Proin rutrum ligula sit amet efficitur pellentesque. Quisque nunc nisl, vehicula id condimentum ac, efficitur sed nibh. Duis eget vulputate ante.

        Sed in aliquam lorem. Suspendisse ut est diam. Curabitur sapien velit, blandit eu molestie id, bibendum sed dui. Suspendisse lacinia tempus nunc, sed bibendum purus maximus at. Aenean nulla quam, tincidunt tristique urna a, dignissim rutrum nibh. Vivamus consequat euismod quam quis scelerisque. Aliquam erat volutpat. Proin hendrerit ornare nisl, sed aliquam magna malesuada non.

        Nulla sit amet elit augue. Vestibulum erat orci, tristique eget malesuada ut, tristique ac ex. Fusce ac sollicitudin ipsum, ac cursus lorem. Fusce tincidunt risus vel quam venenatis maximus. Cras tincidunt nulla dui, vel eleifend nunc porta sit amet. Nam eu dui mattis, sodales sem vitae, bibendum lectus. Nulla facilisi. Aenean mollis velit eget ipsum finibus vestibulum. Duis ullamcorper urna felis, vel volutpat est placerat ut. Praesent non ante pellentesque, consequat mi id, mattis augue. Ut ut purus augue. Donec consectetur diam eget est pharetra, blandit consectetur ligula pellentesque. Suspendisse ac lacus et nibh lacinia viverra vel eget massa. Nullam condimentum urna ac nunc blandit, at venenatis libero accumsan. Nam fermentum cursus ultrices. Phasellus eleifend justo nibh, ac vehicula purus dignissim eget.

        Proin eu nisi at sem volutpat semper. Curabitur imperdiet sem a augue bibendum, ut pellentesque arcu vehicula. Nunc diam arcu, semper id feugiat et, feugiat id lacus. Nunc ut enim id massa elementum dictum ac ut lorem. Nulla facilisi. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec dapibus ipsum id neque rhoncus aliquet. Pellentesque ullamcorper ante a quam dignissim tempor. Duis blandit lectus auctor nulla fermentum, sit amet suscipit justo feugiat. Maecenas mattis porta quam, vitae ultricies nisi posuere ut. Duis placerat dapibus lectus quis eleifend. Phasellus rhoncus libero vitae tempor consequat. Etiam efficitur odio vel tincidunt feugiat. Vestibulum sed nisi id ante rhoncus efficitur. Suspendisse lacinia turpis id felis pellentesque congue. Duis molestie, dolor quis hendrerit hendrerit, metus justo aliquam dolor, in rhoncus enim erat vitae lacus.

        Fusce faucibus turpis sed aliquet vulputate. In hac habitasse platea dictumst. In eget pretium arcu. Praesent vitae eros pretium, sagittis eros vitae, efficitur nulla. Phasellus suscipit id odio et finibus. Vivamus ut eros lacus. Praesent pulvinar quam sit amet augue volutpat egestas. Phasellus at justo libero. Etiam vulputate id purus quis aliquam. Aenean ornare eget leo eu scelerisque. Nullam at arcu vitae diam rutrum placerat. Aliquam sollicitudin at sem sodales molestie. Aliquam quis metus bibendum, ultrices eros in, luctus nisi. Duis at elit convallis, tincidunt orci sed, dapibus turpis. Integer leo ligula, vehicula sed leo nec, hendrerit vestibulum lectus.</p>
      </div>
    </div>

  </div>

  <script type="text/javascript">
  var dataSetName = document.getElementById('dataSetDropDown');
  var dataSetString = dataSetName.options[dataSetName.selectedIndex].value;
  var fileLocations = 'ValidationFiles/' + dataSetString + '.pdf';
  var openImpDoc = document.getElementById('open-doc-box');
  var errorModal = document.getElementById('error-modal');
  var btnErrorSearch = document.getElementById('btnErrorSearch');
  var span = document.getElementsByClassName("close")[0];

    //setting the option for the dataset name
    function dataSetNameSave() {
      var dataSetName = document.getElementById('dataSetDropDown');
      var dataSetString = dataSetName.options[dataSetName.selectedIndex].value;

      localStorage.setItem("dataSetName", dataSetString);
    }

    //setting the data file name
    function dataFileNameSave() {
      var input = document.getElementById('fileToUpload');
      var fileName = input.files[0].name;
      var fileURL = input.value;
      //var dataFileName = document.getElementById("fileToUpload")

      localStorage.setItem("dataFileName", fileName);
      localStorage.setItem("fileURL", fileURL);
      console.log(input.value);
      //localStorage.setItem("dataFileName", dataFileName);
    }

    //open document if the check box is marked
    function Generate() {
         var dataSetName = document.getElementById('dataSetDropDown');
         var dataSetString = dataSetName.options[dataSetName.selectedIndex].value;
         var openImpDoc = document.getElementById('open-doc-box');
         var errorMessageName = document.getElementById('error-message-name');
         var errorMessageFile = document.getElementById('error-mrssage-file');

         if (openImpDoc.checked == true) {
            window.open('ValidationFiles/' + dataSetString + '.pdf');
        } else {
            return;
      }
    }

    // When the user clicks the button, open the modal
    btnErrorSearch.onclick = function() {
    errorModal.style.display = "block";
    }
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
    errorModal.style.display = "none";
    errorModal.fadeOut('slow');
    }
    // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == errorModal) {
      errorModal.style.display = "none";
      errorModal.fadeOut('slow');
      }
    }

    //clear localStorage on refresh
    window.onload = window.localStorage.clear();
    //reset fields on the form
    document.getElementById("main-form").reset();
  </script>

  </body>
</html>
